{"version":3,"sources":["components/Login/LoginUI.js","components/Login/Login.js","common/Api/ApiEndpoints.js","utilities/Auth/Auth.js"],"names":["useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","alert","Copyright","Typography","variant","color","align","Link","href","target","Date","getFullYear","errors","handleSubmit","handleEmail","handlePassword","saving","email","password","classes","Container","component","maxWidth","CssBaseline","className","Avatar","onSaving","Alert","severity","noValidate","onSubmit","TextField","required","fullWidth","id","label","name","autoComplete","autoFocus","onChange","error","helperText","value","type","Button","disabled","LinearProgress","Box","mt","Login","useState","url","setUrl","setEmail","setPassword","isLoggedIn","setLoggedIn","setErrors","setSaving","to","LoginUI","e","preventDefault","isEmail","isEmpty","Object","keys","length","isFormValid","body","Auth","login","apiEndpoints","then","data","getRedirectedUrl","catch","err","message","task","auth","setLoginSession","response","loggedIn","localStorage","setItem","TOKEN_KEY","token","USER_KEY","JSON","stringify","user","EXPIRES_AT_KEY","expiresAt","getAuthHeader","tokenName","getItem","setRedirectedUrl","redirectedUrl","this","loginUrl","Promise","resolve","reject","fetch","method","headers","Accept","res","status","json","removeItem","parse","now"],"mappings":"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","file":"static/js/14.bcde0460.chunk.js","sourcesContent":["import React from 'react'\nimport {\n  Avatar,\n  Button,\n  CssBaseline,\n  TextField,\n  Link,\n  Box,\n  Typography,\n  Container,\n  LinearProgress\n} from '@material-ui/core/'\nimport Alert from '@material-ui/lab/Alert'\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  alert: {\n    width: '100%'\n  }\n}))\n\nfunction Copyright () {\n  return (\n    <Typography variant='body2' color='textSecondary' align='center'>\n      {'Copyright Â© '}\n      <Link color='inherit' href='https://www.linkedin.com/in/mohammed-ramadan-85664898/' target='_blank'>\n        Ramadanko's starter kit for react\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  )\n}\n\nexport default ({ errors, handleSubmit, handleEmail, handlePassword, saving, email, password, ...props }) => {\n  const classes = useStyles()\n  return (\n    <Container component='main' maxWidth='xs'>\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component='h1' variant='h5'>\n          Sign in\n        </Typography>\n        {errors.onSaving &&\n          <Alert variant='filled' severity='error' className={classes.alert}>\n            {errors.onSaving}\n          </Alert>}\n\n        <form className={classes.form} noValidate onSubmit={handleSubmit}>\n          <TextField\n            variant='outlined'\n            margin='normal'\n            required\n            fullWidth\n            id='email'\n            label='Email Address'\n            name='email'\n            autoComplete='email'\n            autoFocus\n            onChange={handleEmail}\n            error={!!errors.email}\n            helperText={errors.email}\n            value={email}\n          />\n          <TextField\n            variant='outlined'\n            margin='normal'\n            required\n            fullWidth\n            name='password'\n            label='Password'\n            type='password'\n            id='password'\n            autoComplete='current-password'\n            onChange={handlePassword}\n            error={!!errors.password}\n            helperText={errors.password}\n            value={password}\n          />\n          <Button\n            type='submit'\n            fullWidth\n            variant='contained'\n            color='primary'\n            className={classes.submit}\n            disabled={saving}\n          >\n            Sign In\n          </Button>\n          {saving ?  <LinearProgress /> : null}\n        </form>\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  )\n}\n","import React, { useState } from 'react'\nimport Auth from '../../utilities/Auth/Auth'\nimport { Redirect } from 'react-router-dom'\nimport apiEndpoints from '../../common/Api/ApiEndpoints'\nimport {isEmail, isEmpty} from 'validator'\nimport LoginUI from './LoginUI'\n\nconst Login = () => {\n  const [url, setUrl] = useState('/')\n  const [email, setEmail] = useState('mohammed.ramadanko@gmail.com')\n  const [password, setPassword] = useState('password')\n  const [isLoggedIn, setLoggedIn] = useState(false)\n  const [errors, setErrors] = useState({})\n  const [saving, setSaving] = useState(false)\n\n  const handleEmail = (e) => {\n    setEmail(e.target.value)\n  }\n\n  const handlePassword = (e) => {\n    setPassword(e.target.value)\n  }\n\n  const isFormValid = () => {\n    const errors = {}\n    if (!isEmail(email)) {\n      errors.email = 'Please enter a valid Email address.'\n    }\n\n    if (isEmpty(password)) {\n      errors.password = 'Invalid password.'\n    }\n    setErrors(errors)\n    return Object.keys(errors).length === 0\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    if (!isFormValid()) {\n      return\n    }\n    setSaving(true)\n    const body = { email, password }\n    Auth.login(body, apiEndpoints.login)\n      .then((data) => {\n        let url = Auth.getRedirectedUrl()\n        url = url || '/'\n        setUrl(url)\n        setLoggedIn(true)\n      })\n      .catch((err) => {\n        setSaving(false)\n        setErrors({ onSaving: err.message })\n      })\n  }\n\n  return (\n    <>\n      {\n        isLoggedIn\n          ? <Redirect to={url} />\n          : <LoginUI errors={errors} handleSubmit={handleSubmit} handleEmail={handleEmail}\n                     handlePassword={handlePassword} saving={saving} email={email} password={password} />\n      }\n    </>\n  )\n}\n\nexport default Login\n","export default {\n  login: '/api/auth/login',\n  task: '/api/task'\n}\n","class Auth {\n  constructor () {\n    this.loggedIn = false\n    this.redirectedUrl = false\n    this.TOKEN_KEY = 'appToken'\n    this.USER_KEY = 'APP_USER'\n    this.EXPIRES_AT_KEY = 'expiresAt'\n  }\n\n  login (data, loginUrl) {\n    return new Promise((resolve, reject) => {\n      fetch(loginUrl, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      })\n        .then(res => {\n          if (res.status !== 200) {\n            return res.json().then(res => { throw res })\n          }\n          return res.json()\n        })\n        .then((res) => {\n          this.setLoginSession(res)\n          resolve(res)\n        })\n        .catch((error) => {\n          reject(error)\n        })\n    })\n  }\n\n  logout () {\n    localStorage.removeItem(this.TOKEN_KEY)\n    localStorage.removeItem(this.USER_KEY)\n    localStorage.removeItem(this.EXPIRES_AT_KEY)\n  }\n\n  isLoggedIn () {\n    const expiresAt = JSON.parse(localStorage.getItem(this.EXPIRES_AT_KEY))\n    return Date.now() < expiresAt\n  }\n\n  setLoginSession = (response) => {\n    this.loggedIn = true\n    localStorage.setItem(this.TOKEN_KEY, response.token)\n    localStorage.setItem(this.USER_KEY, JSON.stringify(response.user))\n    localStorage.setItem(this.EXPIRES_AT_KEY, response.expiresAt)\n  }\n\n  getAuthHeader = (tokenName = '') => {\n    return tokenName !== '' ? tokenName : 'Bearer ' + localStorage.getItem(this.TOKEN_KEY)\n  }\n\n  setRedirectedUrl = (url) => {\n    this.redirectedUrl = url\n  }\n\n  getRedirectedUrl = () => {\n    return this.redirectedUrl\n  }\n}\n\nconst auth = new Auth()\n\nexport default auth\n"],"sourceRoot":""}