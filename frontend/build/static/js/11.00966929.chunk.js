(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[11],{337:function(e,a,t){"use strict";t.r(a);var n=t(61),r=t(0),i=t.n(r),o=t(67),l=t(2),s=t(59),c=t(177),m=t(85),u=t(171),d=t(317),g=t(316),h=t(315),p=t(340),E=t(318),f=t(321),v=t(176),S=t(329),b=t(331),w=t(172),O=t.n(w),j=t(303),y=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},alert:{width:"100%"}}}));function I(){return i.a.createElement(u.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",i.a.createElement(d.a,{color:"inherit",href:"https://www.linkedin.com/in/mohammed-ramadan-85664898/",target:"_blank"},"Ramadanko's starter kit for react")," ",(new Date).getFullYear(),".")}var _=function(e){var a=e.errors,t=e.handleSubmit,n=e.handleEmail,r=e.handlePassword,o=e.saving,l=e.email,s=e.password,c=(Object(m.a)(e,["errors","handleSubmit","handleEmail","handlePassword","saving","email","password"]),y());return i.a.createElement(g.a,{component:"main",maxWidth:"xs"},i.a.createElement(h.a,null),i.a.createElement("div",{className:c.paper},i.a.createElement(p.a,{className:c.avatar},i.a.createElement(O.a,null)),i.a.createElement(u.a,{component:"h1",variant:"h5"},"Sign in"),a.onSaving&&i.a.createElement(b.a,{variant:"filled",severity:"error",className:c.alert},a.onSaving),i.a.createElement("form",{className:c.form,noValidate:!0,onSubmit:t},i.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:n,error:!!a.email,helperText:a.email,value:l}),i.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:r,error:!!a.password,helperText:a.password,value:s}),i.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,disabled:o},"Sign In"),o?i.a.createElement(v.a,null):null)),i.a.createElement(S.a,{mt:8},i.a.createElement(I,null)))};a.default=function(){var e=Object(r.useState)("/"),a=Object(n.a)(e,2),t=a[0],m=a[1],u=Object(r.useState)("mohammed.ramadanko@gmail.com"),d=Object(n.a)(u,2),g=d[0],h=d[1],p=Object(r.useState)("password"),E=Object(n.a)(p,2),f=E[0],v=E[1],S=Object(r.useState)(!1),b=Object(n.a)(S,2),w=b[0],O=b[1],j=Object(r.useState)({}),y=Object(n.a)(j,2),I=y[0],k=y[1],K=Object(r.useState)(!1),T=Object(n.a)(K,2),P=T[0],N=T[1];return i.a.createElement(i.a.Fragment,null,w?i.a.createElement(l.a,{to:t}):i.a.createElement(_,{errors:I,handleSubmit:function(e){if(e.preventDefault(),function(){var e={};return Object(c.isEmail)(g)||(e.email="Please enter a valid Email address."),Object(c.isEmpty)(f)&&(e.password="Invalid password."),k(e),0===Object.keys(e).length}()){N(!0);var a={email:g,password:f};o.a.login(a,s.a.login).then((function(e){var a=o.a.getRedirectedUrl();m(a=a||"/"),O(!0)})).catch((function(e){N(!1),k({onSaving:e.message})}))}},handleEmail:function(e){h(e.target.value)},handlePassword:function(e){v(e.target.value)},saving:P,email:g,password:f}))}},59:function(e,a,t){"use strict";a.a={login:"/api/auth/login",task:"/api/task"}},67:function(e,a,t){"use strict";var n=t(75),r=t(76),i=new(function(){function e(){var a=this;Object(n.a)(this,e),this.setLoginSession=function(e){a.loggedIn=!0,localStorage.setItem(a.TOKEN_KEY,e.token),localStorage.setItem(a.USER_KEY,JSON.stringify(e.user)),localStorage.setItem(a.EXPIRES_AT_KEY,e.expiresAt)},this.getAuthHeader=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==e?e:"Bearer "+localStorage.getItem(a.TOKEN_KEY)},this.setRedirectedUrl=function(e){a.redirectedUrl=e},this.getRedirectedUrl=function(){return a.redirectedUrl},this.loggedIn=!1,this.redirectedUrl=!1,this.TOKEN_KEY="appToken",this.USER_KEY="APP_USER",this.EXPIRES_AT_KEY="expiresAt"}return Object(r.a)(e,[{key:"login",value:function(e,a){var t=this;return new Promise((function(n,r){fetch(a,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return 200!==e.status?e.json().then((function(e){throw e})):e.json()})).then((function(e){t.setLoginSession(e),n(e)})).catch((function(e){r(e)}))}))}},{key:"logout",value:function(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_KEY),localStorage.removeItem(this.EXPIRES_AT_KEY)}},{key:"isLoggedIn",value:function(){var e=JSON.parse(localStorage.getItem(this.EXPIRES_AT_KEY));return Date.now()<e}}]),e}());a.a=i}}]);
//# sourceMappingURL=11.00966929.chunk.js.map